<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">

    <title>
Links    </title>

    <link rel="shortcut icon" href="static/favicon.png">

    <!-- CSS for Layout -->
    <link rel="stylesheet" type="text/css" href="theme/css/katex.min.css">
    <!-- <link rel="stylesheet" type="text/css" href="theme/css/charts.css"> -->
    <link rel="stylesheet" type="text/css" href="theme/css/decorations.css">
    <link rel="stylesheet" type="text/css" href="theme/css/interactive.css">
    <!-- <link rel="stylesheet" type="text/css" href="theme/css/main.css"> -->
    <link rel="stylesheet" type="text/css" href="theme/css/jem.css">

    <!-- CSS for Colors -->
    <!-- <link rel="stylesheet" type="text/css" id="dark-rotated-theme-css" -->
    <!--       class="color-css" href="theme/css/colors/color-dark-rotated.css"> -->
    <!-- <link rel="stylesheet" type="text/css" href="theme/css/colors/pygments.css"> -->
    <!-- <link rel="stylesheet" type="text/css" href="theme/css/colors.css"> -->


    <!-- <link rel="stylesheet" -->
    <!--       href="theme/css/fonts.css"> -->


    <!-- Pelican variable injection -->
    <script type="text/javascript">var pelican = {};</script>

    <!-- Main JavaScript functions -->
    <script src="theme/js/main.js"></script>

  </head>

  <body>
    <main>
      <menu>
        <!-- The checkbox hack -->
        <input type="checkbox" id="hamburger-checkbox">
        <label for="hamburger-checkbox">
          <div id="hamburger">
            <span></span>
            <span></span>
            <span></span>
            <span>MENU</span>
          </div>
        </label>
        <nav>
          <ul>
            <li>
              <p>Links</p>
              <ul>
                <li>
                  <a href="/">Home</a>
                </li>
              </ul>
          </ul>
        </nav>
      </menu>

      <div id="top-spacer"></div>

<header>
    <h1>
        Private Links
    </h1>
</header>

<article>

        <input id="slug" type="password" name="slug">
  Original Slug
        <br>
        <input id="host" type="password" name="host">
  Generating Hostname
        <br>
<button id="submit_button" type="button">Submit</button>

<!-- From https://cdnjs.com/libraries/crypto-js -->
<script src="theme/js/lib/cryptojs_md5.js"></script>
<script type="text/javascript">


  var submitBtn = document.getElementById('submit_button');
  var slugEl = document.getElementById('slug');
  var hostEl = document.getElementById('host');

  onReady(function(){
      document.getElementById('slug').focus();
  });
  
  function decrypt() {
      var slug = slugEl.value;
      var host = hostEl.value;

      function hexxor(a, b){
          var out = ''
          if (a.length > b.length) {
              for (var i = 0; i < b.length; i++) {
                  out += (parseInt(a[i], 16) ^ parseInt(b[i], 16)).toString(16)
              }
          } else {
              for (var i = 0; i < a.length; i++) {
                  out += (parseInt(a[i], 16) ^ parseInt(b[i], 16)).toString(16)
              }
          }
          return out;
      }
      
      cryptoslug = CryptoJS.MD5(
          CryptoJS.enc.Hex.parse(
              (
                  hexxor(
                      CryptoJS.MD5(CryptoJS.enc.Latin1.parse(slug)).toString(CryptoJS.enc.Hex),
                      CryptoJS.MD5(CryptoJS.enc.Latin1.parse(host)).toString(CryptoJS.enc.Hex)
                  )
              )
          )
      ).toString(CryptoJS.enc.Hex);

      window.location.href = cryptoslug;
  }

  hostEl.onkeypress = function(e) {
      if (!e) e = window.event;
      var keyCode = e.keyCode || e.which;
      if (keyCode == '13') {
          decrypt();
          return false;
      }
  }

  submitBtn.onclick = decrypt;
  
</script>
</div>
</article>
    </main>

    <script type="text/javascript">
     engage();
    </script>
  </body>

</html>
